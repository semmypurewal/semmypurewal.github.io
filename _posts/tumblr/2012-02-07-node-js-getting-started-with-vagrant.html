---
layout: post
title: 'Node.js: Getting Started with Vagrant'
date: '2012-02-07T15:34:00-08:00'
tags:
- nodejs
- vagrant
- chef
- webdev
tumblr_url: http://blog.semmy.me/post/17222183802/node-js-getting-started-with-vagrant
---
<p>(<b>UPDATE:</b> Vagrant 1.0 has been released. It is recommended that you no longer install it via rubygems. Instead you can install it by downloading the appropriate package for your system <a href="http://downloads.vagrantup.com/tags/v1.0.0" target="_blank">here</a>. This process is much easier, particularly in Windows.)</p>

<p>When I was asked to teach a course in web development in the <a href="http://www.cs.unca.edu" target="_blank">CS Department at UNC Asheville</a>, I decided to use Node.js as the server side framework. This was not an easy decision: my initial inclination was to go with Ruby on Rails. One advantage that tipped the scale in Node&#8217;s favor, however, is that it is allowing me to teach a single language (JavaScript) on both the client and server-side. Since some of my students are still relatively new to programming, the opportunity to focus on a single language throughout the semester is a major plus. Obviously, there are a few disadvantages to using Node.js, but overall I think I made a good choice. I plan to share more about my experiences once the semester is over.</p>

<p>In the meantime, I have managed to overcome a major hurdle that had me a little worried before we even started: I have a plan to easily get all of the students set up with a working development environment!  As anyone who has taught a web-programming class to undergraduates can attest, setting up a web framework and a DB can be an difficult obstacle to overcome. Due to the diversity of working environments (i.e. students often have their own computers), any workable solution has to be cross-platform (Linux, OS X, and Windows) and should require minimal headaches for the students. After all, our goal is to get them up to speed as developers, and while it&#8217;s useful for them to know how to navigate a *nix system, we don&#8217;t want to overwhelm them with too much in a single semester.</p>

<p>Fortunately, <a href="http://www.virtualbox.org" target="_blank">VirtualBox</a> and <a href="http://www.vagrantup.com" target="_blank">Vagrant</a> help solve this problem by allowing Chef to provision virtual machines. (I&#8217;ve previously written about Vagrant and Chef <a href="http://blog.semmy.me/2011/08/01/vagrant-chef.html" target="_blank">here</a> and <a href="http://blog.semmy.me/2011/09/16/vagrant-chef-and-node-js.html" target="_blank">here</a>.) We&#8217;ll be starting the server-side part of the course in a few weeks, so I&#8217;ve created a Vagrantfile and compiled a set of Chef cookbooks to get the students started with Node.js, MongoDB and Redis. The Node cookbook was slightly modified from the cookbooks found in the Opscode community site, the mongo cookbooks are the ones officially distributed by 10gen, and the Redis cookbook was built by following Reid Draper&#8217;s <a href="http://reiddraper.com/first-chef-recipe/" target="_blank">tutorial</a>.</p>

<p>The result is the node-dev-bootstrap project which I&#8217;ve posted on <a href="https://github.com/semmypurewal/node-dev-bootstrap" target="_blank">github</a>. To get it to work, I&#8217;ll assume you have working copies of git, RubyGems and VirtualBox installed. If you don&#8217;t, you can find more information about how to install git <a href="http://progit.org/book/ch1-4.html" target="_blank">here</a> and more information about how to install RubyGems <a href="http://vagrantup.com/docs/getting-started/index.html" target="_blank">here</a>. You can download VirtualBox <a href="http://www.virtualbox.org" target="_blank">here</a>.</p>

<p>Once you have that, you&#8217;re ready to go. Fire up a terminal window and run the following commands:</p>

<pre class="code">
$ gem install vagrant
$ vagrant box add base <a href="http://files.vagrantup.com/lucid32.box">http://files.vagrantup.com/lucid32.box</a>
</pre>

<p>If you get a permissions-related error when you type the first command, try running it with <tt>sudo</tt>, i.e.

</p><pre class="code">
$ sudo gem install vagrant
</pre>

After vagrant is installed, you can check out the git repo:

<pre class="code">
$ git clone <a href="https://github.com/semmypurewal/node-dev-bootstrap.git">https://github.com/semmypurewal/node-dev-bootstrap.git</a>
</pre>

<p>Now run</p>

<pre class="code">
$ cd node-dev-bootstrap
$ vagrant up
</pre>

<p>and after a few minutes you should have a working Node.js/MongoDB/Redis environment.</p>

<p>Finally, give your environment a try:</p>

<pre class="code">
$ vagrant ssh
$ cd app
$ node server.js
</pre>

<p>If all goes well, you should be able to point your browser to localhost:3000 where you&#8217;ll see &#8216;hello world!&#8217;</p>

<p>You can halt your virtual machine by typing the following from your host machine (in the node-dev-bootstrap directory):</p>

<pre class="code">
$ vagrant halt
</pre>

<p>and you can completely destroy it with</p>

<pre class="code">
$ vagrant destroy
</pre>
